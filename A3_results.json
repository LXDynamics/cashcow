{"created": 1752161513.5261967, "duration": 1.7289025783538818, "exitcode": 1, "root": "/home/alex/cashcow", "environment": {}, "summary": {"passed": 17, "failed": 3, "total": 20, "collected": 20}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/test_storage_corrected.py", "type": "Module"}]}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader", "outcome": "passed", "result": [{"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_loader_initialization", "type": "Function", "lineno": 30}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_generate_file_path_employee", "type": "Function", "lineno": 36}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_generate_file_path_grant", "type": "Function", "lineno": 53}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_save_entity_to_yaml", "type": "Function", "lineno": 70}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_load_entity_from_yaml", "type": "Function", "lineno": 97}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_load_all_entities", "type": "Function", "lineno": 122}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_validate_entity_data", "type": "Function", "lineno": 163}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_handle_date_fields", "type": "Function", "lineno": 198}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_invalid_yaml_file", "type": "Function", "lineno": 223}]}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore", "outcome": "passed", "result": [{"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_store_initialization", "type": "Function", "lineno": 248}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_query_basic", "type": "Function", "lineno": 265}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_get_by_name", "type": "Function", "lineno": 275}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_get_active_entities", "type": "Function", "lineno": 284}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_sync_from_yaml", "type": "Coroutine", "lineno": 294}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_query_with_filters", "type": "Function", "lineno": 338}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_error_handling", "type": "Function", "lineno": 353}]}, {"nodeid": "tests/test_storage_corrected.py::TestStorageIntegration", "outcome": "passed", "result": [{"nodeid": "tests/test_storage_corrected.py::TestStorageIntegration::test_yaml_to_database_sync", "type": "Coroutine", "lineno": 373}, {"nodeid": "tests/test_storage_corrected.py::TestStorageIntegration::test_bidirectional_sync", "type": "Function", "lineno": 450}, {"nodeid": "tests/test_storage_corrected.py::TestStorageIntegration::test_error_handling", "type": "Function", "lineno": 494}, {"nodeid": "tests/test_storage_corrected.py::TestStorageIntegration::test_performance_with_dataset", "type": "Coroutine", "lineno": 510}]}, {"nodeid": "tests/test_storage_corrected.py", "outcome": "passed", "result": [{"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader", "type": "Class"}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore", "type": "Class"}, {"nodeid": "tests/test_storage_corrected.py::TestStorageIntegration", "type": "Class"}]}], "tests": [{"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_loader_initialization", "lineno": 30, "outcome": "passed", "keywords": ["test_loader_initialization", "TestYamlEntityLoader", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.0007938639973872341, "outcome": "passed"}, "call": {"duration": 0.003530556001351215, "outcome": "passed"}, "teardown": {"duration": 0.0002958289987873286, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_generate_file_path_employee", "lineno": 36, "outcome": "passed", "keywords": ["test_generate_file_path_employee", "TestYamlEntityLoader", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00020568799664033577, "outcome": "passed"}, "call": {"duration": 0.00364699700003257, "outcome": "passed"}, "teardown": {"duration": 0.0001847969979280606, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_generate_file_path_grant", "lineno": 53, "outcome": "passed", "keywords": ["test_generate_file_path_grant", "TestYamlEntityLoader", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00026470699958736077, "outcome": "passed"}, "call": {"duration": 0.0026837199984584004, "outcome": "passed"}, "teardown": {"duration": 0.00015009899652795866, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_save_entity_to_yaml", "lineno": 70, "outcome": "passed", "keywords": ["test_save_entity_to_yaml", "TestYamlEntityLoader", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00016443200001958758, "outcome": "passed"}, "call": {"duration": 0.005356825000490062, "outcome": "passed"}, "teardown": {"duration": 0.00014196999836713076, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_load_entity_from_yaml", "lineno": 97, "outcome": "passed", "keywords": ["test_load_entity_from_yaml", "TestYamlEntityLoader", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00017796999600250274, "outcome": "passed"}, "call": {"duration": 0.0032400990021415055, "outcome": "passed"}, "teardown": {"duration": 0.00018112600082531571, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_load_all_entities", "lineno": 122, "outcome": "passed", "keywords": ["test_load_all_entities", "TestYamlEntityLoader", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00019571500160964206, "outcome": "passed"}, "call": {"duration": 0.004223408999678213, "outcome": "passed"}, "teardown": {"duration": 0.00015996400179574266, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_validate_entity_data", "lineno": 163, "outcome": "passed", "keywords": ["test_validate_entity_data", "TestYamlEntityLoader", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00019333400268806145, "outcome": "passed"}, "call": {"duration": 0.0014194729956216179, "outcome": "passed"}, "teardown": {"duration": 0.0001519029974588193, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_handle_date_fields", "lineno": 198, "outcome": "passed", "keywords": ["test_handle_date_fields", "TestYamlEntityLoader", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.000187872996320948, "outcome": "passed"}, "call": {"duration": 0.002996123999764677, "outcome": "passed"}, "teardown": {"duration": 0.00015437399997608736, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestYamlEntityLoader::test_invalid_yaml_file", "lineno": 223, "outcome": "passed", "keywords": ["test_invalid_yaml_file", "TestYamlEntityLoader", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00026625400641933084, "outcome": "passed"}, "call": {"duration": 0.001961747999303043, "outcome": "passed", "stdout": "Error loading /tmp/tmpubeugmzs/entities/invalid.yaml: mapping values are not allowed here\n  in \"/tmp/tmpubeugmzs/entities/invalid.yaml\", line 1, column 14\n"}, "teardown": {"duration": 0.00018357099907007068, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_store_initialization", "lineno": 248, "outcome": "passed", "keywords": ["test_store_initialization", "TestEntityStore", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.000198046000150498, "outcome": "passed"}, "call": {"duration": 0.061490988002333324, "outcome": "passed"}, "teardown": {"duration": 0.000280175001535099, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_query_basic", "lineno": 265, "outcome": "passed", "keywords": ["test_query_basic", "TestEntityStore", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00019415099814068526, "outcome": "passed"}, "call": {"duration": 0.025612755998736247, "outcome": "passed"}, "teardown": {"duration": 0.00020142900029895827, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_get_by_name", "lineno": 275, "outcome": "passed", "keywords": ["test_get_by_name", "TestEntityStore", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00021016599930590019, "outcome": "passed"}, "call": {"duration": 0.022556587995495647, "outcome": "passed"}, "teardown": {"duration": 0.00027077499544247985, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_get_active_entities", "lineno": 284, "outcome": "passed", "keywords": ["test_get_active_entities", "TestEntityStore", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00019614900520537049, "outcome": "passed"}, "call": {"duration": 0.02049356300267391, "outcome": "passed"}, "teardown": {"duration": 0.00016116899496410042, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_sync_from_yaml", "lineno": 294, "outcome": "failed", "keywords": ["test_sync_from_yaml", "asyncio", "pytestmark", "TestEntityStore", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.0008625310001662001, "outcome": "passed"}, "call": {"duration": 0.02620658800151432, "outcome": "failed", "crash": {"path": "/home/alex/.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 584, "message": "sqlalchemy.exc.ArgumentError: Textual SQL expression 'DELETE FROM entities' should be explicitly declared as text('DELETE FROM entities')"}, "traceback": [{"path": "tests/test_storage_corrected.py", "lineno": 325, "message": "in test_sync_from_yaml"}, {"path": "src/cashcow/storage/database.py", "lineno": 77, "message": "in sync_from_yaml"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", "lineno": 463, "message": "in execute"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", "lineno": 190, "message": "in greenlet_spawn"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", "lineno": 2365, "message": "in execute"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", "lineno": 2149, "message": "in _execute_internal"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 395, "message": "in expect"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 621, "message": "in _literal_coercion"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 614, "message": "in _text_coercion"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 584, "message": "in _no_text_coercion"}], "longrepr": "tests/test_storage_corrected.py:325: in test_sync_from_yaml\n    count = await store.sync_from_yaml(self.entities_dir)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nsrc/cashcow/storage/database.py:77: in sync_from_yaml\n    await session.execute(f\"DELETE FROM {EntityRecord.__tablename__}\")\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:463: in execute\n    result = await greenlet_spawn(\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:190: in greenlet_spawn\n    result = context.switch(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2365: in execute\n    return self._execute_internal(\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2149: in _execute_internal\n    statement = coercions.expect(roles.StatementRole, statement)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:395: in expect\n    resolved = impl._literal_coercion(\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:621: in _literal_coercion\n    return self._text_coercion(element, argname, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:614: in _text_coercion\n    return _no_text_coercion(element, argname)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:584: in _no_text_coercion\n    raise exc_cls(\nE   sqlalchemy.exc.ArgumentError: Textual SQL expression 'DELETE FROM entities' should be explicitly declared as text('DELETE FROM entities')"}, "teardown": {"duration": 0.0004754210021928884, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_query_with_filters", "lineno": 338, "outcome": "passed", "keywords": ["test_query_with_filters", "TestEntityStore", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00020295899594202638, "outcome": "passed"}, "call": {"duration": 0.02365218399791047, "outcome": "passed"}, "teardown": {"duration": 0.0002680990000953898, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestEntityStore::test_error_handling", "lineno": 353, "outcome": "passed", "keywords": ["test_error_handling", "TestEntityStore", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.00018619600450620055, "outcome": "passed"}, "call": {"duration": 0.0015947520005283877, "outcome": "passed"}, "teardown": {"duration": 0.00015001199790276587, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestStorageIntegration::test_yaml_to_database_sync", "lineno": 373, "outcome": "failed", "keywords": ["test_yaml_to_database_sync", "asyncio", "pytestmark", "TestStorageIntegration", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.0005083030046080239, "outcome": "passed"}, "call": {"duration": 0.020472518001042772, "outcome": "failed", "crash": {"path": "/home/alex/.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 584, "message": "sqlalchemy.exc.ArgumentError: Textual SQL expression 'DELETE FROM entities' should be explicitly declared as text('DELETE FROM entities')"}, "traceback": [{"path": "tests/test_storage_corrected.py", "lineno": 423, "message": "in test_yaml_to_database_sync"}, {"path": "src/cashcow/storage/database.py", "lineno": 77, "message": "in sync_from_yaml"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", "lineno": 463, "message": "in execute"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", "lineno": 190, "message": "in greenlet_spawn"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", "lineno": 2365, "message": "in execute"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", "lineno": 2149, "message": "in _execute_internal"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 395, "message": "in expect"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 621, "message": "in _literal_coercion"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 614, "message": "in _text_coercion"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 584, "message": "in _no_text_coercion"}], "longrepr": "tests/test_storage_corrected.py:423: in test_yaml_to_database_sync\n    count = await store.sync_from_yaml(self.entities_dir)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nsrc/cashcow/storage/database.py:77: in sync_from_yaml\n    await session.execute(f\"DELETE FROM {EntityRecord.__tablename__}\")\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:463: in execute\n    result = await greenlet_spawn(\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:190: in greenlet_spawn\n    result = context.switch(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2365: in execute\n    return self._execute_internal(\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2149: in _execute_internal\n    statement = coercions.expect(roles.StatementRole, statement)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:395: in expect\n    resolved = impl._literal_coercion(\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:621: in _literal_coercion\n    return self._text_coercion(element, argname, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:614: in _text_coercion\n    return _no_text_coercion(element, argname)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:584: in _no_text_coercion\n    raise exc_cls(\nE   sqlalchemy.exc.ArgumentError: Textual SQL expression 'DELETE FROM entities' should be explicitly declared as text('DELETE FROM entities')"}, "teardown": {"duration": 0.00052856799447909, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestStorageIntegration::test_bidirectional_sync", "lineno": 450, "outcome": "passed", "keywords": ["test_bidirectional_sync", "TestStorageIntegration", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.0002357479970669374, "outcome": "passed"}, "call": {"duration": 0.03178942899830872, "outcome": "passed"}, "teardown": {"duration": 0.00023253700055647641, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestStorageIntegration::test_error_handling", "lineno": 494, "outcome": "passed", "keywords": ["test_error_handling", "TestStorageIntegration", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.0002286609960719943, "outcome": "passed"}, "call": {"duration": 0.02424104300007457, "outcome": "passed"}, "teardown": {"duration": 0.00017997400573221967, "outcome": "passed"}}, {"nodeid": "tests/test_storage_corrected.py::TestStorageIntegration::test_performance_with_dataset", "lineno": 510, "outcome": "failed", "keywords": ["test_performance_with_dataset", "asyncio", "pytestmark", "TestStorageIntegration", "test_storage_corrected.py", "tests", "cashcow", ""], "setup": {"duration": 0.000522650996572338, "outcome": "passed"}, "call": {"duration": 0.045879594996222295, "outcome": "failed", "crash": {"path": "/home/alex/.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 584, "message": "sqlalchemy.exc.ArgumentError: Textual SQL expression 'DELETE FROM entities' should be explicitly declared as text('DELETE FROM entities')"}, "traceback": [{"path": "tests/test_storage_corrected.py", "lineno": 537, "message": "in test_performance_with_dataset"}, {"path": "src/cashcow/storage/database.py", "lineno": 77, "message": "in sync_from_yaml"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", "lineno": 463, "message": "in execute"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", "lineno": 190, "message": "in greenlet_spawn"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", "lineno": 2365, "message": "in execute"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py", "lineno": 2149, "message": "in _execute_internal"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 395, "message": "in expect"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 621, "message": "in _literal_coercion"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 614, "message": "in _text_coercion"}, {"path": "../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py", "lineno": 584, "message": "in _no_text_coercion"}], "longrepr": "tests/test_storage_corrected.py:537: in test_performance_with_dataset\n    count = await store.sync_from_yaml(self.entities_dir)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nsrc/cashcow/storage/database.py:77: in sync_from_yaml\n    await session.execute(f\"DELETE FROM {EntityRecord.__tablename__}\")\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py:463: in execute\n    result = await greenlet_spawn(\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py:190: in greenlet_spawn\n    result = context.switch(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2365: in execute\n    return self._execute_internal(\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/orm/session.py:2149: in _execute_internal\n    statement = coercions.expect(roles.StatementRole, statement)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:395: in expect\n    resolved = impl._literal_coercion(\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:621: in _literal_coercion\n    return self._text_coercion(element, argname, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:614: in _text_coercion\n    return _no_text_coercion(element, argname)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/sql/coercions.py:584: in _no_text_coercion\n    raise exc_cls(\nE   sqlalchemy.exc.ArgumentError: Textual SQL expression 'DELETE FROM entities' should be explicitly declared as text('DELETE FROM entities')"}, "teardown": {"duration": 0.0005633339969790541, "outcome": "passed"}}], "warnings": [{"message": "unclosed database in <sqlite3.Connection object at 0x7fa47e4316c0>", "category": "ResourceWarning", "when": "runtest", "filename": "/home/alex/.cache/pypoetry/virtualenvs/cashcow-9bHuWBgr-py3.13/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", "lineno": 1223}]}